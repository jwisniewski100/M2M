<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="text-center m-t-lg">
                <h1>
                    {{main.helloText}}
                    Overview
                </h1>
            </div>
            <div ibox-tools></div>
            <div class="ibox-content"><br>
                <table id="escalation" class="display" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>IMSI</th>
                        <th>MSISDN</th>
                        <th>Activated</th>
                        <th>Service</th>
                        <th>State</th>
                    </tr>
                    </thead>
                    <tfoot>
                    <tr>
                        <th>IMSI</th>
                        <th>MSISDN</th>
                        <th>Activated</th>
                        <th>Service</th>
                        <th>State</th>
                    </tr>
                    </tfoot>
                </table>
            </div>

        </div>

        <button type="button" class="btn btn-w-m btn-primary" data-toggle="modal" data-target="#Order">Order</button>
        <button type="button" class="btn btn-w-m btn-primary" id="btnAC" data-toggle="modal" data-target="#AC" name = "imsiButton" disabled>Activate</button>
        <button type="button" class="btn btn-w-m btn-primary" id="btnTE" data-toggle="modal" data-target="#TE" name = "imsiButton" disabled>Terminate</button>
        <button type="button" class="btn btn-w-m btn-primary" data-toggle="modal" data-target="#SP" name = "imsiButton">Create SP</button>
        <button type="button" class="btn btn-w-m btn-primary" id="btnCSP" data-toggle="modal" data-target="#CSP" name = "imsiButton" disabled>Change SP</button>
        <button type="button" class="btn btn-w-m btn-primary" id="btnSMS" data-toggle="modal" data-target="#SMS" name = "imsiButton" disabled>Send SMS</button>
            <br>


    </div>
</div>

<form class="modal fade" id="Order" tabindex="-1" role="dialog" action="http://localhost:3000/sims" method="post">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="Orderlabel">Order</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="font-noraml">Select</label>
                    <div class="input-group" >
                        <select data-placeholder="SelectSIM" class="chosen-select" style="width:350px;" tabindex="2" type="text" name="sim_type" >
                            <option value="ClassicMini">ClassicMini</option>
                            <option value="ClassicMicro">ClassicMicro</option>
                            <option value="A1Clasic">A1Clasic</option>
                            <option value="A1d23ultra">A1d23ultra</option>
                            <option value="NanoInter">NanoInter</option>
                        </select>
                    </div>
                </div>
                <div class="form-group"><label>Quantity</label> <input type="number" name="quantity" min="1" placeholder="Quantity" class="form-control"  tabindex="3" required></div>
            </div>
        </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit"  class="btn btn-primary">Save</button>
            </div>
    </div>
</form>



<div class="modal fade" id="AC" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="AClabel">Activate</h4>
                <div class="panel panel-default">
                    <div class="panel-heading">IMSI</div>
                    <div class="panel-body" name="currentIMSI"> </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Service profile</label>
                    <div class="input-group">
                        <select data-placeholder="Service profile" class="chosen-select" style="width:350px;" tabindex="2">
                            <option value="">Service profile</option> 
                        </select>
                    </div>
                </div>
            </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
    </div>
</div>


<div class="modal fade" id="TE" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="TElabel">Terminate</h4>
                <div class="panel panel-default">
                    <div class="panel-heading">IMSI</div>
                    <div class="panel-body" name="currentIMSI"> </div>
                </div>
            </div>
            <div class="modal-body">
                <div><label>Do you want to terminate checked records?</label></div>
            </div>
        </div>
        <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Confirm</button>
        </div>
    </div>
</div>


<div class="modal fade" id="SP" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="SPlabel">Create SP</h4>
            </div>
            <div class="modal-body">
                <div class="form-group"><label>Name</label> <input type="name" placeholder="Name" class="form-control" required></div>
                <div class="form-group"><label>Data limit</label> <input type="number" placeholder="Data limit" class="form-control" required></div>
                <div class="form-group"><label>SMS limit</label> <input type="number" placeholder="SMS limit" class="form-control" required></div>
                <label>LTE enabled: <input type="checkbox"></label><br/>
            <!--    <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input">
                    LTE enabled:
                    </label>
                    </div>          -->
            </div>
        </div>
        <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save</button>
        </div>
    </div>
</div>



<div class="modal fade" id="CSP" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="CSPlabel">Change SP</h4>
                <div class="panel panel-default">
                    <div class="panel-heading">IMSI</div>
                    <div class="panel-body" name="currentIMSI"> </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Select</label>
                    <div class="input-group">
                        <select data-placeholder="Select SIM..." class="chosen-select" style="width:350px;" tabindex="2">
                            <option value="">Select SP</option> 
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
    </div>
</div>



<div class="modal fade" id="SMS" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="SMSlabel">Send SMS</h4>
                <div class="panel panel-default">
                    <div class="panel-heading">IMSI</div>
                    <div class="panel-body" name="currentIMSI"> </div>
                </div>
            </div>
            <div class="modal-body">
                <textarea class="form-control" style="min-width: 100%" placeholder="Message" id="SMSarea"></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Send</button>
        </div>
    </div>
</div>



<script>
    /*var mongoose = require('mongoose');
    var Sim = mongoose.model('sims');

    console.log("Getting all SIMs");
    var simList = Sim.find({});
    console.log(simList)*/

  /*$(document).ready(function () {
        $('#escalation').DataTable();
    });*/
    $(document).ready(function() {
        $('#escalation').DataTable({
            ajax: {
                url: 'http://localhost:3000/sims',
                type: 'GET',
                dataSrc: "",
            },
            "columns": [
                { "data": "IMSI" },
                { "data": "MSISDN" },
                { "data": "activated" },
                { "data": "service" },
                { "data": "state" },
            ]
        });
    } );
</script>


<script>
    var counterChecked = 0;
    $('#escalation').on('change', 'input[type="checkbox"]', function() {
        this.checked ? counterChecked++ : counterChecked--;
        counterChecked > 0 ? $('#btnAC').prop("disabled", false): $('#btnAC').prop("disabled", true);
        counterChecked > 0 ? $('#btnTE').prop("disabled", false): $('#btnTE').prop("disabled", true);
        counterChecked > 0 ? $('#btnSMS').prop("disabled", false): $('#btnSMS').prop("disabled", true);
        counterChecked > 0 ? $('#btnCSP').prop("disabled", false): $('#btnCSP').prop("disabled", true);
    });
</script>





<script>
    $('button[name=imsiButton]').on( "click", function() {
        $('div[name=currentIMSI]').empty();
        var n = 1;
        var txt = ' ';
        for (var x=0;x<200;x+=1){
            if($("tr td input").eq(x).prop('checked')){
                txt += $("tr td").eq(n).text();
                txt += ", ";
            }
            n+=7;
        }
        $('div[name=currentIMSI]').append(" "+txt+" ");
    });
</script>



